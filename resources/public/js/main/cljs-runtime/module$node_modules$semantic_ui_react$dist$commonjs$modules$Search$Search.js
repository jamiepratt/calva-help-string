shadow$provide.module$node_modules$semantic_ui_react$dist$commonjs$modules$Search$Search=function(global,require,module,exports){var _interopRequireDefault=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");exports.__esModule=!0;exports.default=void 0;var _objectWithoutPropertiesLoose2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$objectWithoutPropertiesLoose")),_inheritsLoose2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$inheritsLoose")),
_extends2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$extends"));global=_interopRequireDefault(require("module$node_modules$lodash$without"));var _isEmpty2=_interopRequireDefault(require("module$node_modules$lodash$isEmpty")),_partialRight2=_interopRequireDefault(require("module$node_modules$lodash$partialRight")),_inRange2=_interopRequireDefault(require("module$node_modules$lodash$inRange")),_map2=_interopRequireDefault(require("module$node_modules$lodash$map")),_get2=
_interopRequireDefault(require("module$node_modules$lodash$get")),_reduce2=_interopRequireDefault(require("module$node_modules$lodash$reduce")),_invoke2=_interopRequireDefault(require("module$node_modules$lodash$invoke")),_isPlainObject2=_interopRequireDefault(require("module$node_modules$lodash$isPlainObject")),_isUndefined2=_interopRequireDefault(require("module$node_modules$lodash$isUndefined")),_clsx=_interopRequireDefault(require("module$node_modules$clsx$dist$clsx")),_keyboardKey=_interopRequireDefault(require("module$node_modules$keyboard_key$src$keyboardKey"));
module=_interopRequireDefault(require("module$node_modules$prop_types$index"));var _react=_interopRequireDefault(require("module$node_modules$react$index")),_shallowequal=_interopRequireDefault(require("module$node_modules$shallowequal$index")),_lib=require("module$node_modules$semantic_ui_react$dist$commonjs$lib$index"),_Input=_interopRequireDefault(require("module$node_modules$semantic_ui_react$dist$commonjs$elements$Input$index")),_SearchCategory=_interopRequireDefault(require("module$node_modules$semantic_ui_react$dist$commonjs$modules$Search$SearchCategory")),
_SearchResult=_interopRequireDefault(require("module$node_modules$semantic_ui_react$dist$commonjs$modules$Search$SearchResult")),_SearchResults=_interopRequireDefault(require("module$node_modules$semantic_ui_react$dist$commonjs$modules$Search$SearchResults")),overrideSearchInputProps=function(predefinedProps){var input=predefinedProps.input;return(0,_isUndefined2.default)(input)?(0,_extends2.default)({},predefinedProps,{input:{className:"prompt"}}):(0,_isPlainObject2.default)(input)?(0,_extends2.default)({},
predefinedProps,{input:(0,_extends2.default)({},input,{className:(0,_clsx.default)(input.className,"prompt")})}):predefinedProps};require=function(_Component){function Search(){for(var _this,_len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_this=_Component.call.apply(_Component,[this].concat(args))||this;_this.handleResultSelect=function(e,result){(0,_invoke2.default)(_this.props,"onResultSelect",e,(0,_extends2.default)({},_this.props,{result}))};_this.handleSelectionChange=
function(e){var result=_this.getSelectedResult();(0,_invoke2.default)(_this.props,"onSelectionChange",e,(0,_extends2.default)({},_this.props,{result}))};_this.closeOnEscape=function(e){_keyboardKey.default.getCode(e)===_keyboardKey.default.Escape&&(e.preventDefault(),_this.close())};_this.moveSelectionOnKeyDown=function(e){switch(_keyboardKey.default.getCode(e)){case _keyboardKey.default.ArrowDown:e.preventDefault();_this.moveSelectionBy(e,1);break;case _keyboardKey.default.ArrowUp:e.preventDefault(),
_this.moveSelectionBy(e,-1)}};_this.selectItemOnEnter=function(e){if(_keyboardKey.default.getCode(e)===_keyboardKey.default.Enter){var result=_this.getSelectedResult();result&&(e.preventDefault(),_this.setValue(result.title),_this.handleResultSelect(e,result),_this.close())}};_this.closeOnDocumentClick=function(e){_this.close()};_this.handleMouseDown=function(e){_this.isMouseDown=!0;(0,_invoke2.default)(_this.props,"onMouseDown",e,_this.props);_lib.eventStack.sub("mouseup",_this.handleDocumentMouseUp)};
_this.handleDocumentMouseUp=function(){_this.isMouseDown=!1;_lib.eventStack.unsub("mouseup",_this.handleDocumentMouseUp)};_this.handleInputClick=function(e){e.nativeEvent.stopImmediatePropagation();_this.tryOpen()};_this.handleItemClick=function(e,_ref){_ref=_this.getSelectedResult(_ref.id);e.nativeEvent.stopImmediatePropagation();_this.setValue(_ref.title);_this.handleResultSelect(e,_ref);_this.close()};_this.handleItemMouseDown=function(e){e.preventDefault()};_this.handleFocus=function(e){(0,_invoke2.default)(_this.props,
"onFocus",e,_this.props);_this.setState({focus:!0})};_this.handleBlur=function(e){(0,_invoke2.default)(_this.props,"onBlur",e,_this.props);_this.setState({focus:!1})};_this.handleSearchChange=function(e){e.stopPropagation();var minCharacters=_this.props.minCharacters,open=_this.state.open,newQuery=e.target.value;(0,_invoke2.default)(_this.props,"onSearchChange",e,(0,_extends2.default)({},_this.props,{value:newQuery}));newQuery.length<minCharacters?_this.close():open||_this.tryOpen(newQuery);_this.setValue(newQuery)};
_this.getFlattenedResults=function(){var _this$props=_this.props,results=_this$props.results;return _this$props.category?(0,_reduce2.default)(results,function(memo,categoryData){return memo.concat(categoryData.results)},[]):results};_this.getSelectedResult=function(index){void 0===index&&(index=_this.state.selectedIndex);var results=_this.getFlattenedResults();return(0,_get2.default)(results,index)};_this.setValue=function(value){_this.setState({value,selectedIndex:_this.props.selectFirstResult?0:
-1})};_this.moveSelectionBy=function(e,offset){var selectedIndex=_this.state.selectedIndex,lastIndex=_this.getFlattenedResults().length-1;offset=selectedIndex+offset;offset>lastIndex?offset=0:0>offset&&(offset=lastIndex);_this.setState({selectedIndex:offset});_this.scrollSelectedItemIntoView();_this.handleSelectionChange(e)};_this.scrollSelectedItemIntoView=function(){if((0,_lib.isBrowser)()){var menu=document.querySelector(".ui.search.active.visible .results.visible");if(menu){var item=menu.querySelector(".result.active");
if(item){var isOutOfLowerView=item.offsetTop+item.clientHeight>menu.scrollTop+menu.clientHeight;item.offsetTop<menu.scrollTop?menu.scrollTop=item.offsetTop:isOutOfLowerView&&(menu.scrollTop=item.offsetTop+item.clientHeight-menu.clientHeight)}}}};_this.tryOpen=function(currentValue){void 0===currentValue&&(currentValue=_this.state.value);currentValue.length<_this.props.minCharacters||_this.open()};_this.open=function(){_this.setState({open:!0})};_this.close=function(){_this.setState({open:!1})};_this.renderSearchInput=
function(rest){var _this$props2=_this.props;return _Input.default.create(_this$props2.input,{autoGenerateKey:!1,defaultProps:(0,_extends2.default)({},rest,{autoComplete:"off",icon:_this$props2.icon,onChange:_this.handleSearchChange,onClick:_this.handleInputClick,tabIndex:"0",value:_this.state.value,placeholder:_this$props2.placeholder}),overrideProps:overrideSearchInputProps})};_this.renderNoResults=function(){var _this$props3=_this.props,noResultsDescription=_this$props3.noResultsDescription;return _react.default.createElement("div",
{className:"message empty"},_react.default.createElement("div",{className:"header"},_this$props3.noResultsMessage),noResultsDescription&&_react.default.createElement("div",{className:"description"},noResultsDescription))};_this.renderResult=function(_ref2,index,_array,offset){_array=_ref2.childKey;_ref2=(0,_objectWithoutPropertiesLoose2.default)(_ref2,["childKey"]);void 0===offset&&(offset=0);index+=offset;return _react.default.createElement(_SearchResult.default,(0,_extends2.default)({key:null!=
_array?_array:_ref2.id||_ref2.title,active:_this.state.selectedIndex===index,onClick:_this.handleItemClick,onMouseDown:_this.handleItemMouseDown,renderer:_this.props.resultRenderer},_ref2,{id:index}))};_this.renderResults=function(){return(0,_map2.default)(_this.props.results,_this.renderResult)};_this.renderCategories=function(){var _this$props4=_this.props,categoryLayoutRenderer=_this$props4.categoryLayoutRenderer,categoryRenderer=_this$props4.categoryRenderer,selectedIndex=_this.state.selectedIndex,
count=0;return(0,_map2.default)(_this$props4.results,function(_ref3){var childKey=_ref3.childKey;_ref3=(0,_objectWithoutPropertiesLoose2.default)(_ref3,["childKey"]);childKey=(0,_extends2.default)({key:null!=childKey?childKey:_ref3.name,active:(0,_inRange2.default)(selectedIndex,count,count+_ref3.results.length),layoutRenderer:categoryLayoutRenderer,renderer:categoryRenderer},_ref3);var renderFn=(0,_partialRight2.default)(_this.renderResult,count);count+=_ref3.results.length;return _react.default.createElement(_SearchCategory.default,
childKey,_ref3.results.map(renderFn))})};_this.renderMenuContent=function(){var _this$props5=_this.props,category=_this$props5.category,showNoResults=_this$props5.showNoResults;return(0,_isEmpty2.default)(_this$props5.results)?showNoResults?_this.renderNoResults():null:category?_this.renderCategories():_this.renderResults()};_this.renderResultsMenu=function(){var resultsClasses=_this.state.open?"visible":"",menuContent=_this.renderMenuContent();if(menuContent)return _react.default.createElement(_SearchResults.default,
{className:resultsClasses},menuContent)};return _this}(0,_inheritsLoose2.default)(Search,_Component);Search.getAutoControlledStateFromProps=function(props,state){return"undefined"!==typeof state.prevValue&&(0,_shallowequal.default)(state.prevValue,state.value)?{prevValue:state.value}:{prevValue:state.value,selectedIndex:props.selectFirstResult?0:-1}};var _proto=Search.prototype;_proto.shouldComponentUpdate=function(nextProps,nextState){return!(0,_shallowequal.default)(nextProps,this.props)||!(0,_shallowequal.default)(nextState,
this.state)};_proto.componentDidUpdate=function(prevProps,prevState){!prevState.focus&&this.state.focus?(this.isMouseDown||this.tryOpen(),this.state.open&&_lib.eventStack.sub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])):prevState.focus&&!this.state.focus&&(this.isMouseDown||this.close(),_lib.eventStack.unsub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter]));!prevState.open&&this.state.open?(this.open(),_lib.eventStack.sub("click",this.closeOnDocumentClick),_lib.eventStack.sub("keydown",
[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])):prevState.open&&!this.state.open&&(this.close(),_lib.eventStack.unsub("click",this.closeOnDocumentClick),_lib.eventStack.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter]))};_proto.componentWillUnmount=function(){_lib.eventStack.unsub("click",this.closeOnDocumentClick);_lib.eventStack.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])};_proto.render=
function(){var _this$state=this.state,focus=_this$state.focus,_this$props6=this.props,aligned=_this$props6.aligned,className=_this$props6.className,fluid=_this$props6.fluid,loading=_this$props6.loading;_this$state=(0,_clsx.default)("ui",_this$state.open&&"active visible",_this$props6.size,_this$state.searchClasses,(0,_lib.useKeyOnly)(_this$props6.category,"category"),(0,_lib.useKeyOnly)(focus,"focus"),(0,_lib.useKeyOnly)(fluid,"fluid"),(0,_lib.useKeyOnly)(loading,"loading"),(0,_lib.useValueAndKey)(aligned,
"aligned"),"search",className);_this$props6=(0,_lib.getUnhandledProps)(Search,this.props);focus=(0,_lib.getElementType)(Search,this.props);_this$props6=(0,_lib.partitionHTMLProps)(_this$props6,{htmlProps:_lib.htmlInputAttrs});aligned=_this$props6[0];return _react.default.createElement(focus,(0,_extends2.default)({},_this$props6[1],{className:_this$state,onBlur:this.handleBlur,onFocus:this.handleFocus,onMouseDown:this.handleMouseDown}),this.renderSearchInput(aligned),this.renderResultsMenu())};return Search}(_lib.ModernAutoControlledComponent);
exports.default=require;require.handledProps="aligned as category categoryLayoutRenderer categoryRenderer className defaultOpen defaultValue fluid icon input loading minCharacters noResultsDescription noResultsMessage onBlur onFocus onMouseDown onResultSelect onSearchChange onSelectionChange open placeholder resultRenderer results selectFirstResult showNoResults size value".split(" ");require.propTypes={as:module.default.elementType,defaultOpen:module.default.bool,defaultValue:module.default.string,
icon:module.default.oneOfType([module.default.node,module.default.object]),minCharacters:module.default.number,noResultsDescription:module.default.node,noResultsMessage:module.default.node,open:module.default.bool,results:module.default.oneOfType([module.default.arrayOf(module.default.shape(_SearchResult.default.propTypes)),module.default.shape(_SearchCategory.default.propTypes)]),selectFirstResult:module.default.bool,showNoResults:module.default.bool,value:module.default.string,categoryLayoutRenderer:module.default.func,
categoryRenderer:module.default.func,resultRenderer:module.default.func,onBlur:module.default.func,onFocus:module.default.func,onMouseDown:module.default.func,onResultSelect:module.default.func,onSearchChange:module.default.func,onSelectionChange:module.default.func,aligned:module.default.string,category:module.default.bool,className:module.default.string,fluid:module.default.bool,input:_lib.customPropTypes.itemShorthand,loading:module.default.bool,size:module.default.oneOf((0,global.default)(_lib.SUI.SIZES,
"medium")),placeholder:module.default.string};require.defaultProps={icon:"search",input:"text",minCharacters:1,noResultsMessage:"No results found.",showNoResults:!0};require.autoControlledProps=["open","value"];require.Category=_SearchCategory.default;require.Result=_SearchResult.default;require.Results=_SearchResults.default}
//# sourceMappingURL=module$node_modules$semantic_ui_react$dist$commonjs$modules$Search$Search.js.map
